(this.webpackJsonpime2=this.webpackJsonpime2||[]).push([[0],{141:function(t,e,i){"use strict";i.r(e);var n=i(11),s=i.n(n),o=i(58),a=i.n(o),r=(i(74),i(12)),c=i.n(r),h=i(14),u=i(0),d=i(1),l=i(7),f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},v=function(){function t(){Object(u.a)(this,t),this.dict={},this.chunksDicts=void 0,this.borders=void 0,this.chunkSizes=[40,20,10,5],this.chunksDicts=this.chunkSizes.map((function(){return{}}));for(var e=-100;e<=0;e++)for(var i=-2;i<=2;i++)for(var n=-2;n<=2;n++)this.dict[this.getKeyFromPosition({x:i,y:n,z:e})]=1;for(var s=-103;s<=-100;s++)for(var o=-100;o<=100;o++)for(var a=-100;a<=100;a++)this.dict[this.getKeyFromPosition({x:o,y:a,z:s})]=1;for(var r=46;r<=50;r++)for(var c=50;c<=54;c++)this.dict[this.getKeyFromPosition({x:r,y:c,z:100})]=1;this.dict[this.getKeyFromPosition({x:49,y:55,z:100})]=1,this.dict[this.getKeyFromPosition({x:47,y:55,z:100})]=1,this.dict[this.getKeyFromPosition({x:49,y:56,z:100})]=1,this.dict[this.getKeyFromPosition({x:47,y:56,z:100})]=1,this.dict[this.getKeyFromPosition({x:48,y:56,z:100})]=1;var h=this.getPositionFromKey(Object.keys(this.dict)[0]);this.borders={xMin:h.x,xMax:h.x,yMin:h.y,yMax:h.y,zMin:h.z,zMax:h.z},this.setChunksAndBorders()}return Object(d.a)(t,[{key:"getKeyFromPosition",value:function(t){return JSON.stringify(t)}},{key:"getPositionFromKey",value:function(t){return JSON.parse(t)}},{key:"getChunkPosition",value:function(t,e){return{a:f((e.y-e.x)/t),b:f((e.y+e.x+e.z/3)/t),c:f(e.z/t)}}},{key:"getChunkKeyFromChunkPosition",value:function(t){return JSON.stringify({a:Math.floor(t.a),b:Math.floor(t.b),c:Math.floor(t.c)})}},{key:"getChunkKeyFromPosition",value:function(t,e){return this.getChunkKeyFromChunkPosition(this.getChunkPosition(t,e))}},{key:"getTileAt",value:function(t){return this.dict[this.getKeyFromPosition(t)]}},{key:"setChunksAndBorders",value:function(){var t=this;Object.keys(this.dict).forEach((function(e){var i=t.getPositionFromKey(e);i.x<t.borders.xMin&&(t.borders.xMin=i.x),i.x>t.borders.xMax&&(t.borders.xMax=i.x),i.y<t.borders.yMin&&(t.borders.yMin=i.y),i.y>t.borders.yMax&&(t.borders.yMax=i.y),i.z<t.borders.zMin&&(t.borders.zMin=i.z),i.z>t.borders.zMax&&(t.borders.zMax=i.z),t.chunksDicts.forEach((function(e,n){e[t.getChunkKeyFromPosition(t.chunkSizes[n],i)]=!0}))}))}},{key:"_crossSectionIsEmpty",value:function(t,e,i,n){for(var s=this.getChunkPosition(e,i),o=this.getChunkPosition(e,n),a=Math.floor(s.a);a<=o.a;a++)for(var r=Math.floor(s.c);r<=o.c;r++)if(t[this.getChunkKeyFromChunkPosition({a:a,b:s.b,c:r})])return!1;return!0}},{key:"crossSectionIsEmpty",value:function(t,e){for(var i=Object(l.a)(Object(l.a)({},t),{},{z:Math.min(this.borders.zMax,Math.max(this.borders.zMin,t.z))}),n=Object(l.a)(Object(l.a)({},e),{},{z:Math.min(this.borders.zMax,Math.max(this.borders.zMin,e.z))}),s=0;s<this.chunksDicts.length;s++)if(!0===this._crossSectionIsEmpty(this.chunksDicts[s],this.chunkSizes[s],i,n))return!0;return!1}}]),t}(),g=i(17),x=i(4),b=i(40),w=-2,m=-2,y=0,P=1e3,k=.01,C=function(){function t(e,i){Object(u.a)(this,t),this.canvas=e,this.tileMap=i,this.context=void 0,this.viewCone=void 0,this.framesDuration=Object(x.a)(Array(30)).fill(0),this.lastTime=0,this.frameIndex=0;var n=this.canvas.getContext("2d");if(!n)throw new Error("Context cannot be null");n.imageSmoothingEnabled=!1,this.context=n;var s={x:w,y:m,z:y},o=this.canvas.width,a=this.canvas.height,r=Math.pow(4,1),c=Math.pow(4,0),h={a1:-o/2/c,a2:o/2/c,b1:-a/2/c,b2:a/2/c};this.viewCone=new b.a(s,P,h,-500,i,r),this.lastTime=Date.now(),this.renderLoop(),this.init()}return Object(d.a)(t,[{key:"init",value:function(){var t=Object(h.a)(c.a.mark((function t(){var e,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.time("discover"),t.next=3,this.viewCone.discover(1500);case 3:return console.timeEnd("discover"),t.abrupt("return");case 7:return w+=-5,m+=3,y+=-6,P*=5,this.viewCone.move({x:w,y:m,z:y},P),t.next=14,new Promise((function(t){return setTimeout(t,500)}));case 14:return e={x:w,y:m,z:y},i=new b.a(e,P,this.viewCone.rendererWindow,this.viewCone.startDistanceFromCenter,this.viewCone.tileMap,this.viewCone.zoom),console.time("discover2"),t.next=19,i.discover(1500);case 19:console.timeEnd("discover2"),this.viewCone=i;case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"renderLoop",value:function(){var t=this,e=Date.now()-this.lastTime;this.lastTime=Date.now(),this.framesDuration.push(e),this.framesDuration.shift(),this.frameIndex++%30===0&&console.log(this.fps.toFixed(1)),this.paintCanvas(),m+=2*(k+=0),y-=0,P+=1e3*k,(w+=k)>2&&(k=-.01),w<-2&&(k=.01),this.viewCone.move({x:w,y:m,z:y},P),requestAnimationFrame((function(){return t.renderLoop()}))}},{key:"paintCanvas",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.viewCone.canvas,0,0,this.canvas.width,this.canvas.height)}},{key:"fps",get:function(){return this.framesDuration.length/this.framesDuration.reduce((function(t,e){return t+e}),0)*1e3}}]),t}(),O=function(){function t(e){Object(u.a)(this,t),this.canvas=e}return Object(d.a)(t,[{key:"start",value:function(){var t=Object(h.a)(c.a.mark((function t(){var e,i,n,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new g.a("tile1"),t.next=3,e.load();case 3:return i=new g.a("tile2"),t.next=6,i.load();case 6:return n=new g.a("mask"),t.next=9,n.load();case 9:s=new v,new C(this.canvas,s);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),j=function(){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){t&&t.current&&new O(t.current).start()}),[t]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{width:1600,height:800,ref:t,style:{border:"1px solid black",margin:"20px"}}))},p=function(){return s.a.createElement("div",null,s.a.createElement("p",null,"IME"),s.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},17:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(12),s=i.n(n),o=i(14),a=i(0),r=i(1),c=i(32),h=new(i(31).a)(["name"]),u=function(){function t(e){Object(a.a)(this,t),this.name=e,this.url=void 0,this.imageJs=void 0,this.canvas=void 0,this._isLoaded=!1,this.url="".concat("","/").concat(e,".png"),h.addEntry(this)}return Object(r.a)(t,[{key:"isLoaded",value:function(){return this._isLoaded}},{key:"load",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.load(this.url);case 2:e=t.sent,this.imageJs=e,this.canvas=this.imageJs.getCanvas(),this._isLoaded=!0;case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}],[{key:"getResource",value:function(t){return h.getEntry({name:t})}},{key:"getLoadedResource",value:function(t){var e=h.getEntry({name:t});if(e&&e.isLoaded())return e}}]),t}()},31:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(0),s=i(1),o=function(){function t(e){Object(n.a)(this,t),this.idFields=e,this.dict={}}return Object(s.a)(t,[{key:"getId",value:function(t){var e={};return this.idFields.forEach((function(i){e[i]=t[i]})),JSON.stringify(e)}},{key:"addEntry",value:function(t){this.dict[this.getId(t)]=t}},{key:"getEntry",value:function(t){return this.dict[this.getId(t)]}}]),t}()},40:function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return d}));var n=i(12),s=i.n(n),o=i(14),a=i(0),r=i(1),c=i(68),h=i(67),u=i.n(h),d=function(){function e(t,i,n,s,o,r){Object(a.a)(this,e),this.center=t,this.focal=i,this.rendererWindow=n,this.startDistanceFromCenter=s,this.tileMap=o,this.zoom=r,this.crossSections=[],this.maxDistanceFromCenter=void 0,this.sprites=[],this.canvas=void 0,this.context=void 0,this.maxDistanceFromCenter=s-1;var c=this.newCanvasAndContext(),h=c.canvas,u=c.context;this.canvas=h,this.context=u}return Object(r.a)(e,[{key:"newCanvasAndContext",value:function(){var t=new OffscreenCanvas(this.width*this.zoom,this.height*this.zoom),e=t.getContext("2d");if(!e)throw new Error("Context cannot be null");return e.imageSmoothingEnabled=!1,{canvas:t,context:e}}},{key:"paintCanvas",value:function(){var t=this;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),u.a.orderBy(this.crossSections,["distanceFromCenter"],["desc"]).forEach((function(e){var i=e.sprite;i&&t.context.drawImage(i.image,i.sx,i.sy,i.sw,i.sh,0,0,t.canvas.width,t.canvas.height)}))}},{key:"discover",value:function(){var e=Object(o.a)(s.a.mark((function e(i){var n,o,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.maxDistanceFromCenter,o=n+1;case 2:if(!(o<=n+i)){e.next=15;break}return e.next=5,new Promise((function(e){return t(e)}));case 5:return e.next=7,new c.a(this.center,this.focal,this.window,o,this.tileMap);case 7:return a=e.sent,e.next=10,a.paintCanvas();case 10:this.crossSections.push(a),this.maxDistanceFromCenter=o-1;case 12:o++,e.next=2;break;case 15:return e.next=17,this.paintCanvas();case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(t,e){this.crossSections.forEach((function(i){i.move(t,e)})),this.paintCanvas()}},{key:"window",get:function(){return{a1:this.rendererWindow.a1/this.zoom,a2:this.rendererWindow.a2/this.zoom,b1:this.rendererWindow.b1/this.zoom,b2:this.rendererWindow.b2/this.zoom}}},{key:"width",get:function(){return this.window.a2-this.window.a1}},{key:"height",get:function(){return this.window.b2-this.window.b1}}]),e}()}).call(this,i(138).setImmediate)},68:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n,s=i(7),o=i(0),a=i(1),r=i(4),c=i(32),h=i(31),u=i(17),d=new h.a(["type","neighborhood"]);!function(t){t[t.FTL=64329]="FTL",t[t.LSL=63735]="LSL",t[t.LSB=10280]="LSB",t[t.LST=62509]="LST",t[t.FBL=65277]="FBL",t[t.LSR=57567]="LSR",t[t.FTR=53199]="FTR",t[t.FBR=0]="FBR",t[t.RSL=59623]="RSL",t[t.RSB=27296]="RSB",t[t.RST=16824]="RST",t[t.RSR=61807]="RSR"}(n||(n={}));var l=function(){function t(e,i){var n;Object(o.a)(this,t),this.type=e,this.neighborhood=i,this.imageJs=void 0,this.canvas=void 0,this.maskResource=void 0,this.tileResource=void 0;var s=u.a.getLoadedResource(e);if(!s)throw new Error("Resource '".concat(e,"' hasn't been loaded."));var a=u.a.getLoadedResource("mask");if(!a)throw new Error("Resource '".concat("mask","' hasn't been loaded."));this.tileResource=s,this.maskResource=a,this.imageJs=this.makeImageJs(),this.canvas=null===(n=this.imageJs)||void 0===n?void 0:n.getCanvas(),d.addEntry(this)}return Object(a.a)(t,[{key:"makeImageJs",value:function(){var t=this.neighborhood,e=t.above,i=t.topLeft,s=t.topRight,o=t.bottomLeft,a=t.bottomRight,h=t.under;if(!(e&&o&&a)){for(var u=this.tileResource.imageJs,d=this.maskResource.imageJs,l=new c.a(32,24,void 0,{bitDepth:16}),f=0;f<32;f++)for(var v=0;v<24;v++){l.setPixelXY(f,v,[0,0,0,0]);var g=d.getPixelXY(f,v);if(g[0]!==n.FTL)if(g[0]!==n.FTR)if(g[0]!==n.FBL)if(g[0]!==n.FBR)if(g[0]!==n.LSL)if(g[0]!==n.LST)if(g[0]!==n.LSB)if(g[0]!==n.LSR)if(g[0]!==n.RSR)if(g[0]!==n.RST)if(g[0]!==n.RSB)if(g[0]!==n.RSL);else{if(!0===a){if(!0===e)continue;l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)));continue}if(!1===o){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+48)))}else{if(!0===a){if(!0===e)continue;l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)));continue}if(!1===h){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+48)))}else{if(!0===a){if(!0===e)continue;l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)));continue}if(!1===e){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+48)))}else{if(!0===a){if(!0===e)continue;l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)));continue}if(!1===s){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+48)))}else{if(!0===o){if(!0===e)continue;l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)));continue}if(!1===a){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+48)))}else{if(!0===o){if(!0===e)continue;l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)));continue}if(!1===h){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+48)))}else{if(!0===o){if(!0===e)continue;l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)));continue}if(!1===e){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+48)))}else{if(!0===o){if(!0===e)continue;l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)));continue}if(!1===i){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+48)))}else{if(!0===e)continue;if(!1===a){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)))}else{if(!0===e)continue;if(!1===o){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)))}else{if(!0===e)continue;if(!1===s){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)))}else{if(!0===e)continue;if(!1===i){l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v)));continue}l.setPixelXY(f,v,Object(r.a)(u.getPixelXY(f,v+24)))}}return l}}}],[{key:"getTile",value:function(t,e){return d.getEntry({type:t,neighborhood:e})}},{key:"getOrMakeTile",value:function(e,i){var n=d.getEntry({type:e,neighborhood:i});return n||new t(e,i)}}]),t}(),f=function(){function t(e,i,n,s,a){Object(o.a)(this,t),this.viewConeCenter=e,this.focal=i,this.viewConeWindow=n,this.distanceFromCenter=s,this.tileMap=a,this.center=void 0,this.scale=void 0,this.window=void 0,this.extendedWindow=void 0,this.heightConstraint=void 0,this.crossSectionConstant=void 0,this.tilesDict=void 0,this.margin=void 0,this.canvas=void 0,this.context=void 0,this.da=0,this.db=0,this.dw=0,this.dh=0,this.center={x:e.x-s/8,y:e.y-s/8,z:e.z-s/4},this.scale=1+s/i,this.window={a1:n.a1*this.scale,a2:n.a2*this.scale,b1:n.b1*this.scale,b2:n.b2*this.scale},this.margin={a:32,b:24},this.extendedWindow={a1:this.window.a1-this.margin.a,a2:this.window.a2+this.margin.a,b1:this.window.b1-this.margin.b,b2:this.window.b2+this.margin.b},this.heightConstraint=t.getHeightConstraint(e.z-s),this.crossSectionConstant=this.center.x+this.center.y+this.center.z/3,this.tilesDict=this.makeTilesDict()}return Object(a.a)(t,[{key:"newCanvasAndContext",value:function(){var t=new OffscreenCanvas(this.extendedWidth,this.extendedHeight),e=t.getContext("2d");if(!e)throw new Error("Context cannot be null");return e.imageSmoothingEnabled=!1,{canvas:t,context:e}}},{key:"paintCanvas",value:function(){var t=this,e=this.tiles;if(0!==e.length&&!e.every((function(t){return!t.tile.canvas}))){if(!this.context){var i=this.newCanvasAndContext(),n=i.canvas,s=i.context;this.canvas=n,this.context=s}e.forEach((function(e){var i=e.crossSectionPosition,n=i.a,s=i.b,o=e.tile;o.canvas&&t.context&&t.context.drawImage(o.canvas,Math.round(t.extendedWidth/2)+(n-16),Math.round(t.extendedHeight/2)+(-s-8),o.canvas.width,o.canvas.height)}))}}},{key:"getA",value:function(t){var e=t.x;return 16*(t.y-this.center.y-(e-this.center.x))}},{key:"getB",value:function(t){return 32/3*(t.z-this.center.z)}},{key:"getCrossSectionPosition",value:function(t){return{a:this.getA(t),b:this.getB(t)}}},{key:"getProjetedCrossSectionPosition",value:function(t){return{a:this.getA(t)/this.scale,b:this.getB(t)/this.scale}}},{key:"getX",value:function(t){var e=t.a,i=t.b;return this.center.x-e/32-i/64}},{key:"getY",value:function(t){var e=t.a,i=t.b;return this.center.y+e/32-i/64}},{key:"getZ",value:function(t){var e=t.b;return this.center.z+3*e/32}},{key:"getPosition",value:function(t){return{x:this.getX(t),y:this.getY(t),z:this.getZ(t)}}},{key:"forEachTilePosition",value:function(e,i,n){var s=this.extendedWindow,o=s.a1,a=s.a2,r=s.b1,c=s.b2,h=this.heightConstraint,u=Math.ceil(this.getZ({b:r}));i&&i>u&&(u=i);var d=t.getHeightConstraint(u);d!==h&&(u+=t.getHeightConstraint(h-d));var l=Math.floor(this.getZ({b:c}));n&&n<l&&(l=n);var f=t.getHeightConstraint(l);f!==h&&(l-=t.getHeightConstraint(-h+f));for(var v=u;v<=l;v+=3)for(var g=this.getB({z:v}),x=Math.ceil(this.getY({a:o,b:g})),b=Math.floor(this.getY({a:a,b:g})),w=x;w<=b;w++){e({x:Math.round(this.crossSectionConstant-w-v/3),y:w,z:v})}}},{key:"makeTilesDict",value:function(){var e=this,i={},n=this.tileMap,o=this.extendedWindow,a=o.a1,r=o.a2,c=o.b1,h=o.b2;return n.crossSectionIsEmpty(this.getPosition({a:a,b:c}),this.getPosition({a:r,b:h}))||this.forEachTilePosition((function(o){if(n.getTileAt(o)){var a={above:1===n.getTileAt(Object(s.a)(Object(s.a)({},o),{},{z:o.z+1})),bottomLeft:1===n.getTileAt(Object(s.a)(Object(s.a)({},o),{},{x:o.x+1})),bottomRight:1===n.getTileAt(Object(s.a)(Object(s.a)({},o),{},{y:o.y+1})),topLeft:1===n.getTileAt(Object(s.a)(Object(s.a)({},o),{},{y:o.y-1})),topRight:1===n.getTileAt(Object(s.a)(Object(s.a)({},o),{},{x:o.x-1})),under:1===n.getTileAt(Object(s.a)(Object(s.a)({},o),{},{z:o.z-1}))},r=l.getOrMakeTile("tile2",a);i[t.getTileId(o)]={position:o,crossSectionPosition:e.getCrossSectionPosition(o),tile:r}}}),n.borders.zMin,n.borders.zMax),i}},{key:"move",value:function(t,e){var i=3*(t.x+t.y+t.z/3-(this.viewConeCenter.x+this.viewConeCenter.y+this.viewConeCenter.z/3)),n=1+(this.distanceFromCenter+i)/e,s=this.viewConeWindow.a1*n,o=this.viewConeWindow.a2*n,a=this.viewConeWindow.b1*n,r=this.viewConeWindow.b2*n,c=s-this.margin.a,h=o+this.margin.a,u=a-this.margin.b,d=h-c,l=r+this.margin.b-u,f=t.x-i/8,v=t.y-i/8,g=t.z-i/4,x={x:this.center.x+this.viewConeCenter.x-f,y:this.center.y+this.viewConeCenter.y-v,z:this.center.z+this.viewConeCenter.z-g},b=this.getCrossSectionPosition(x),w=b.a,m=b.b;this.da=-(d/2-this.extendedWidth/2)-w,this.db=-(l/2-this.extendedHeight/2)+m,this.dw=o-s-(this.window.a2-this.window.a1),this.dh=r-a-(this.window.b2-this.window.b1)}},{key:"sprite",get:function(){if(this.canvas)return{image:this.canvas,sx:this.margin.a+this.da+Math.round(this.extendedWidth/2)-this.extendedWidth/2,sy:this.margin.b+this.db+Math.round(this.extendedHeight/2)-this.extendedHeight/2,sw:this.width+this.dw,sh:this.height+this.dh}}},{key:"width",get:function(){return this.window.a2-this.window.a1}},{key:"height",get:function(){return this.window.b2-this.window.b1}},{key:"extendedWidth",get:function(){return this.extendedWindow.a2-this.extendedWindow.a1}},{key:"extendedHeight",get:function(){return this.extendedWindow.b2-this.extendedWindow.b1}},{key:"tiles",get:function(){return Object.values(this.tilesDict)}}],[{key:"getHeightConstraint",value:function(t){return(3+t%3)%3}},{key:"getTileId",value:function(t){return JSON.stringify(t)}}]),t}()},69:function(t,e,i){t.exports=i(141)},74:function(t,e,i){}},[[69,1,2]]]);
//# sourceMappingURL=main.6f30049e.chunk.js.map